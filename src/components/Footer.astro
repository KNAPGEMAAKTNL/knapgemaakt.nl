---
import TextRevealCSS from "./TextRevealCSS.astro";
import { getAllCities } from "../data/cities";

const cities = getAllCities();
---

<footer class="bg-ink text-canvas py-12 md:py-16 px-6 md:px-12 lg:px-16 bg-grid-dark relative overflow-hidden">
	<div class="max-w-6xl xl:max-w-7xl mx-auto relative z-10">
		<!-- Service Areas -->
		<div class="mb-12 md:mb-16">
			<div class="font-mono text-xs uppercase tracking-widest text-canvas/40 mb-4">
				Webdesign in jouw regio
			</div>
			<div class="flex flex-wrap gap-x-4 gap-y-2">
				{cities.map((city) => (
					<a
						href={`/webdesign-${city.slug}`}
						class="text-sm text-canvas/60 hover:text-acid transition-colors"
					>
						{city.name}
					</a>
				))}
			</div>
		</div>

		<!-- Big Logo -->
		<div class="pointer-events-none mb-12 md:mb-16">
			<TextRevealCSS
				text="KNAP GEMAAKT."
				class="text-[12vw] md:text-[10vw] font-black leading-[0.8] tracking-tighter select-none block"
			/>
		</div>

		<!-- Bottom Bar -->
		<div class="pt-8 border-t border-canvas/10">
			<!-- Legal Links -->
			<div class="flex flex-wrap justify-center md:justify-start gap-x-6 gap-y-2 font-mono text-xs text-canvas/50 uppercase tracking-widest mb-6">
				<a href="/contact" class="hover:text-acid transition-colors">Contact</a>
				<a href="/algemene-voorwaarden" class="hover:text-acid transition-colors">Voorwaarden</a>
				<a href="/privacy" class="hover:text-acid transition-colors">Privacy</a>
				<a href="/sitemap" class="hover:text-acid transition-colors">Sitemap</a>
				<button
					type="button"
					id="cookie-settings-trigger"
					class="hover:text-acid transition-colors flex items-center gap-1.5 cursor-pointer"
					aria-label="Open cookie-instellingen"
				>
					<svg class="w-3.5 h-3.5" viewBox="0 0 24 24" fill="currentColor">
						<path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
					</svg>
					Cookie-instellingen
				</button>
			</div>

			<!-- Business Info + Copyright -->
			<div class="flex flex-col md:flex-row md:justify-between md:items-center gap-4">
				<div class="flex flex-wrap justify-center md:justify-start gap-x-6 gap-y-2 font-mono text-xs text-canvas/40">
					<span>KvK: 73652377</span>
					<span>BTW: NL002383577B12</span>
					<span>Buren, Nederland</span>
					<a href="mailto:info@knapgemaakt.nl" class="hover:text-acid transition-colors">info@knapgemaakt.nl</a>
				</div>
				<div class="text-center md:text-right font-mono text-xs text-canvas/40">
					Â© 2026 KNAP GEMAAKT.
				</div>
			</div>
		</div>
	</div>
</footer>

<script>
	// Connect footer button to CookieConsent component
	// Works with Astro View Transitions
	function attachCookieSettingsHandler() {
		const btn = document.getElementById('cookie-settings-trigger');
		if (btn && !btn.dataset.listenerAttached) {
			btn.addEventListener('click', () => {
				window.dispatchEvent(new CustomEvent('openCookieSettings'));
			});
			btn.dataset.listenerAttached = 'true';
		}
	}

	// Attach on initial load
	attachCookieSettingsHandler();

	// Re-attach after View Transitions
	document.addEventListener('astro:after-swap', attachCookieSettingsHandler);
</script>
