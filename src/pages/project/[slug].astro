---
import Layout from "../../layouts/Layout.astro";
import Footer from "../../components/Footer.astro";
import { getAllProjects, getProjectBySlug } from "../../data/projects";
import BreadcrumbSchema from "../../components/seo/BreadcrumbSchema.astro";

export const prerender = true;

export function getStaticPaths() {
	const projects = getAllProjects();
	return projects.map((project) => ({
		params: { slug: project.slug },
		props: { project },
	}));
}

const { project } = Astro.props;

const metaDescription = `${project.title} - ${project.shortDescription} Bekijk dit ${project.industry.toLowerCase()} website voorbeeld. Case study webdesign ${project.location}.`;

const breadcrumbs = [
	{ name: "Home", url: "https://knapgemaakt.nl/" },
	{ name: "Portfolio", url: "https://knapgemaakt.nl/portfolio" },
	{ name: project.title, url: `https://knapgemaakt.nl/project/${project.slug}` },
];

// SEO title with industry keyword
const pageTitle = `${project.title} | Website ${project.industry} Voorbeeld`;
---

<Layout title={pageTitle} description={metaDescription}>
	<BreadcrumbSchema items={breadcrumbs} />
	<main class="bg-canvas">
		<!-- Hero Section -->
		<section class="pt-32 pb-16 md:pb-24 px-6 md:px-12 lg:px-16 bg-canvas bg-grid-light relative overflow-hidden">
			<div class="max-w-6xl xl:max-w-7xl mx-auto relative z-10">
				<!-- Breadcrumb -->
				<div class="flex items-center gap-2 text-ink/40 font-mono text-xs uppercase tracking-wider mb-8">
					<a href="/" class="hover:text-electric transition-colors">Home</a>
					<span>/</span>
					<a href="/portfolio" class="hover:text-electric transition-colors">Portfolio</a>
					<span>/</span>
					<span class="text-ink">{project.title}</span>
				</div>

				<!-- Title & Meta -->
				<div class="mb-8 md:mb-12">
					<!-- Category Badge -->
					<div class="mb-4">
						<span class="inline-block px-3 py-1 bg-acid text-ink font-mono text-xs font-bold uppercase tracking-wider">
							{project.category}
						</span>
						<span class="ml-3 text-ink/50 font-mono text-xs uppercase tracking-wider">
							{project.industry} • {project.location}
						</span>
					</div>

					<!-- Title -->
					<h1 class="text-4xl md:text-5xl lg:text-6xl xl:text-7xl font-black uppercase tracking-tighter leading-[0.9] mb-6">
						{project.title}
					</h1>

					<!-- Short Description -->
					<p class="text-xl md:text-2xl text-ink/70 max-w-3xl">
						{project.shortDescription}
					</p>
				</div>

				<!-- Hero Mockup (AI-generated atmospheric image) -->
				<div class="relative aspect-[16/9] overflow-hidden bg-ink shadow-2xl mb-8">
					<img
						src={project.heroMockup || project.image}
						alt={`${project.title} - ${project.industry} website showcase`}
						width={1920}
						height={1080}
						loading="eager"
						fetchpriority="high"
						decoding="async"
						class="absolute inset-0 w-full h-full object-cover object-center"
					/>
				</div>

				<!-- CTA Buttons -->
				<div class="flex flex-col sm:flex-row gap-4">
					<a
						href={project.link}
						target="_blank"
						rel="noopener noreferrer"
						class="w-full sm:w-auto bg-acid text-ink px-8 py-5 font-bold uppercase tracking-tight hover:bg-ink hover:text-acid transition-colors duration-300 inline-flex items-center justify-center gap-3 group"
					>
						<span>Bekijk Live Website</span>
						<span class="transition-transform duration-300 group-hover:translate-x-1">&rarr;</span>
					</a>
					<a
						href="/aanvragen"
						class="w-full sm:w-auto border-2 border-ink text-ink px-8 py-[18px] font-bold uppercase tracking-tight hover:bg-ink hover:text-canvas transition-colors duration-300 text-center"
					>
						Start Jouw Project
					</a>
				</div>
			</div>
		</section>

		<!-- Project Context -->
		<section class="py-16 md:py-24 px-6 md:px-12 lg:px-16 bg-ink text-canvas bg-grid-dark relative overflow-hidden">
			<div class="max-w-4xl mx-auto relative z-10">
				<div class="text-xs font-mono uppercase tracking-[0.2em] text-acid mb-4">
					[ Context ]
				</div>
				<h2 class="text-3xl md:text-4xl lg:text-5xl font-black uppercase tracking-tight mb-8">
					Over Dit Project
				</h2>
				<div class="text-lg text-canvas/80 leading-relaxed whitespace-pre-line space-y-4">
					{project.fullDescription}
				</div>
			</div>
		</section>

		<!-- Challenge & Solution -->
		<section class="py-16 md:py-24 px-6 md:px-12 lg:px-16 bg-canvas bg-grid-light relative overflow-hidden">
			<div class="max-w-6xl xl:max-w-7xl mx-auto relative z-10">
				<div class="grid md:grid-cols-2 gap-12 md:gap-16 lg:gap-20">
					<!-- Challenge -->
					<div>
						<div class="text-xs font-mono uppercase tracking-[0.2em] text-ink/40 mb-4">
							[ Uitdaging ]
						</div>
						<h2 class="text-2xl md:text-3xl lg:text-4xl font-black uppercase tracking-tight mb-6">
							De Uitdaging
						</h2>
						<p class="text-lg text-ink/70 leading-relaxed whitespace-pre-line">
							{project.challenge}
						</p>
					</div>

					<!-- Solution -->
					<div>
						<div class="text-xs font-mono uppercase tracking-[0.2em] text-ink/40 mb-4">
							[ Oplossing ]
						</div>
						<h2 class="text-2xl md:text-3xl lg:text-4xl font-black uppercase tracking-tight mb-6">
							Onze Aanpak
						</h2>
						<p class="text-lg text-ink/70 leading-relaxed whitespace-pre-line">
							{project.solution}
						</p>
					</div>
				</div>
			</div>
		</section>

		<!-- Features & Technical Highlights -->
		<section class="py-16 md:py-24 px-6 md:px-12 lg:px-16 bg-ink text-canvas bg-grid-dark relative overflow-hidden">
			<div class="max-w-6xl xl:max-w-7xl mx-auto relative z-10">
				<div class="grid md:grid-cols-2 gap-12 md:gap-16">
					<!-- Features -->
					<div>
						<div class="text-xs font-mono uppercase tracking-[0.2em] text-acid mb-4">
							[ Features ]
						</div>
						<h3 class="text-2xl md:text-3xl font-black uppercase tracking-tight mb-8">
							Website Kenmerken
						</h3>
						<ul class="space-y-4">
							{project.features.map((feature) => (
								<li class="flex items-start gap-3 text-canvas/80 text-lg">
									<span class="text-acid mt-1.5 text-xl">✓</span>
									<span>{feature}</span>
								</li>
							))}
						</ul>
					</div>

					<!-- Technical Highlights -->
					{project.technicalHighlights && project.technicalHighlights.length > 0 && (
						<div>
							<div class="text-xs font-mono uppercase tracking-[0.2em] text-acid mb-4">
								[ Techniek ]
							</div>
							<h3 class="text-2xl md:text-3xl font-black uppercase tracking-tight mb-8">
								Technische Highlights
							</h3>
							<ul class="space-y-4">
								{project.technicalHighlights.map((highlight) => (
									<li class="flex items-start gap-3 text-canvas/80 text-lg">
										<span class="text-acid mt-1.5 text-xl">→</span>
										<span>{highlight}</span>
									</li>
								))}
							</ul>
						</div>
					)}
				</div>
			</div>
		</section>

		<!-- Results (conditional) -->
		{project.results && project.results.length > 0 && (
			<section class="py-16 md:py-24 px-6 md:px-12 lg:px-16 bg-canvas bg-grid-light relative overflow-hidden">
				<div class="max-w-4xl mx-auto relative z-10">
					<div class="text-xs font-mono uppercase tracking-[0.2em] text-ink/40 mb-4">
						[ Resultaat ]
					</div>
					<h2 class="text-3xl md:text-4xl lg:text-5xl font-black uppercase tracking-tight mb-8">
						Impact & Resultaten
					</h2>
					<ul class="space-y-4">
						{project.results.map((result) => (
							<li class="flex items-start gap-4 text-lg text-ink/70">
								<span class="text-acid font-bold text-2xl">→</span>
								<span class="leading-relaxed">{result}</span>
							</li>
						))}
					</ul>
				</div>
			</section>
		)}

		<!-- Testimonial (conditional) -->
		{project.testimonial && (
			<section class="py-16 md:py-24 px-6 md:px-12 lg:px-16 bg-ink text-canvas bg-grid-dark relative overflow-hidden">
				<div class="max-w-4xl mx-auto relative z-10 text-center">
					<div class="text-xs font-mono uppercase tracking-[0.2em] text-acid mb-8">
						[ Klant Testimonial ]
					</div>
					<blockquote class="text-2xl md:text-3xl lg:text-4xl font-bold leading-tight mb-8 text-canvas">
						"{project.testimonial.quote}"
					</blockquote>
					<div class="text-acid font-mono text-sm uppercase tracking-wider">
						— {project.testimonial.author}
					</div>
					<div class="text-canvas/60 font-mono text-xs uppercase tracking-wider mt-2">
						{project.testimonial.role}
					</div>
				</div>
			</section>
		)}

		<!-- CTA Section -->
		<section class="py-16 md:py-20 px-6 md:px-12 lg:px-16 bg-acid relative overflow-hidden">
			<div class="max-w-4xl mx-auto relative z-10 text-center">
				<h2 class="text-3xl md:text-4xl lg:text-5xl font-black uppercase tracking-tight mb-6">
					Ook zo'n website?
				</h2>
				<p class="text-xl md:text-2xl text-ink/70 mb-8 max-w-2xl mx-auto">
					Wij maken jouw website in 7 dagen voor €595. Geen gedoe, geen verrassingen.
				</p>
				<a
					href="/aanvragen"
					class="inline-flex items-center gap-3 bg-ink text-acid px-10 py-6 font-bold uppercase tracking-tight hover:bg-ink/90 transition-colors duration-300 group"
				>
					<span>Start Jouw Project</span>
					<span class="transition-transform duration-300 group-hover:translate-x-1">&rarr;</span>
				</a>
			</div>
		</section>

		<!-- Related Projects -->
		<section class="py-16 md:py-24 px-6 md:px-12 lg:px-16 bg-canvas bg-grid-light relative overflow-hidden">
			<div class="max-w-6xl xl:max-w-7xl mx-auto relative z-10">
				<div class="text-xs font-mono uppercase tracking-[0.2em] text-ink/40 mb-4">
					[ Meer Projecten ]
				</div>
				<h2 class="text-3xl md:text-4xl lg:text-5xl font-black uppercase tracking-tight mb-12">
					Bekijk Ook Deze Cases
				</h2>

				<div class="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-10">
					{getAllProjects()
						.filter((p) => p.slug !== project.slug)
						.slice(0, 2)
						.map((relatedProject) => (
							<a
								href={`/project/${relatedProject.slug}`}
								class="group block bg-ink overflow-hidden hover:shadow-2xl transition-shadow duration-300"
							>
								<!-- Project Image -->
								<div class="relative aspect-[16/9] overflow-hidden bg-canvas/5">
									<img
										src={relatedProject.overviewMockup || relatedProject.heroMockup || relatedProject.image}
										alt={`${relatedProject.title} - ${relatedProject.industry} website`}
										width={1920}
										height={1080}
										class="absolute inset-0 w-full h-full object-cover object-center transition-transform duration-700 group-hover:scale-105"
										loading="lazy"
										decoding="async"
									/>
									<!-- Hover Overlay -->
									<div class="absolute inset-0 bg-ink/0 group-hover:bg-ink/70 transition-colors duration-300 flex items-center justify-center">
										<span class="opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-acid text-ink px-6 py-3 font-bold uppercase tracking-tight text-sm">
											Bekijk Case Study
										</span>
									</div>
								</div>

								<!-- Project Info -->
								<div class="p-6 md:p-8 bg-ink text-canvas">
									<!-- Category Badge -->
									<div class="flex items-center gap-3 mb-4">
										<span class="px-3 py-1 bg-acid text-ink font-mono text-xs font-bold uppercase tracking-wider">
											{relatedProject.category}
										</span>
										<span class="text-canvas/40 font-mono text-xs uppercase tracking-wider">
											{relatedProject.industry}
										</span>
									</div>

									<!-- Title -->
									<h3 class="text-xl md:text-2xl font-black uppercase tracking-tight text-canvas leading-tight mb-3 group-hover:text-acid transition-colors duration-300">
										{relatedProject.title}
									</h3>

									<!-- Description -->
									<p class="text-canvas/70 leading-relaxed line-clamp-2">
										{relatedProject.shortDescription}
									</p>
								</div>
							</a>
						))
					}
				</div>
			</div>
		</section>

		<!-- Back to Portfolio -->
		<section class="py-12 px-6 md:px-12 lg:px-16 bg-ink text-canvas bg-grid-dark">
			<div class="max-w-6xl xl:max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-6">
				<div>
					<p class="text-canvas/60 font-mono text-sm uppercase tracking-wider mb-2">
						Meer projecten bekijken?
					</p>
					<p class="text-xl font-bold">
						Ontdek ons volledige portfolio
					</p>
				</div>
				<a
					href="/portfolio"
					class="w-full sm:w-auto bg-acid text-ink px-8 py-5 font-bold uppercase tracking-tight hover:bg-ink hover:text-acid transition-colors duration-300 inline-flex items-center justify-center gap-3 group"
				>
					<span>Naar Portfolio</span>
					<span class="transition-transform duration-300 group-hover:translate-x-1">&rarr;</span>
				</a>
			</div>
		</section>

		<Footer />
	</main>
</Layout>
