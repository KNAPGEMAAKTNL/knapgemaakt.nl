---
import Layout from "../../layouts/Layout.astro";
import Footer from "../../components/Footer.astro";
import { getAllProjects, getProjectBySlug } from "../../data/projects";
import BreadcrumbSchema from "../../components/seo/BreadcrumbSchema.astro";

export const prerender = true;

export function getStaticPaths() {
	const projects = getAllProjects();
	return projects.map((project) => ({
		params: { slug: project.slug },
		props: { project },
	}));
}

const { project } = Astro.props;

const metaDescription = `${project.title} - ${project.shortDescription} Bekijk dit ${project.industry.toLowerCase()} website voorbeeld. Case study webdesign ${project.location}.`;

const breadcrumbs = [
	{ name: "Home", url: "https://knapgemaakt.nl/" },
	{ name: "Portfolio", url: "https://knapgemaakt.nl/portfolio/" },
	{ name: project.title, url: `https://knapgemaakt.nl/project/${project.slug}/` },
];

// SEO title with industry keyword
const pageTitle = `${project.title} | Website ${project.industry} Voorbeeld`;
---

<Layout title={pageTitle} description={metaDescription}>
	<BreadcrumbSchema items={breadcrumbs} />
	<main class="bg-canvas">
		<!-- Hero Section -->
		<section class="pt-32 pb-16 md:pb-24 px-6 md:px-12 lg:px-16 bg-canvas bg-grid-light relative overflow-hidden">
			<div class="max-w-6xl xl:max-w-7xl mx-auto relative z-10">
				<!-- Breadcrumb -->
				<div class="flex items-center gap-2 text-ink/40 font-mono text-xs uppercase tracking-wider mb-8">
					<a href="/" class="hover:text-electric transition-colors">Home</a>
					<span>/</span>
					<a href="/portfolio" class="hover:text-electric transition-colors">Portfolio</a>
					<span>/</span>
					<span class="text-ink">{project.title}</span>
				</div>

				<div class="grid md:grid-cols-2 gap-12 md:gap-16 items-center">
					<!-- Text Content -->
					<div>
						<!-- Category Badge -->
						<div class="mb-4">
							<span class="inline-block px-3 py-1 bg-acid text-ink font-mono text-xs font-bold uppercase tracking-wider">
								{project.category}
							</span>
							<span class="ml-3 text-ink/50 font-mono text-xs uppercase tracking-wider">
								{project.industry} • {project.location}
							</span>
						</div>

						<!-- Title -->
						<h1 class="text-4xl md:text-5xl lg:text-6xl font-black uppercase tracking-tighter leading-[0.9] mb-6">
							{project.title}
						</h1>

						<!-- Short Description -->
						<p class="text-xl text-ink/70 mb-8">
							{project.shortDescription}
						</p>

						<!-- CTA Buttons -->
						<div class="flex flex-col sm:flex-row gap-4">
							<a
								href={project.link}
								target="_blank"
								rel="noopener noreferrer"
								class="w-full sm:w-auto bg-acid text-ink px-8 py-5 font-bold uppercase tracking-tight hover:bg-ink hover:text-acid transition-colors duration-300 inline-flex items-center justify-center gap-3 group"
							>
								<span>Bekijk Live</span>
								<span class="transition-transform duration-300 group-hover:translate-x-1">&rarr;</span>
							</a>
							<a
								href="/aanvragen"
								class="w-full sm:w-auto border-2 border-ink text-ink px-8 py-[18px] font-bold uppercase tracking-tight hover:bg-ink hover:text-canvas transition-colors duration-300 text-center"
							>
								Start Jouw Project
							</a>
						</div>
					</div>

					<!-- Device Mockups -->
					<div class="relative flex items-end justify-center gap-4 md:gap-6">
						<!-- Desktop/Browser Mockup -->
						<div class="relative w-full sm:flex-1 sm:max-w-[400px]">
							<div class="bg-ink rounded-t-lg overflow-hidden shadow-2xl">
								<!-- Browser Chrome -->
								<div class="bg-ink/90 px-3 py-2 flex items-center gap-2 border-b border-canvas/10">
									<div class="flex gap-1">
										<div class="w-2 h-2 rounded-full bg-canvas/20"></div>
										<div class="w-2 h-2 rounded-full bg-canvas/20"></div>
										<div class="w-2 h-2 rounded-full bg-canvas/20"></div>
									</div>
									<div class="flex-1 mx-2">
										<div class="bg-canvas/10 rounded px-2 py-0.5 text-[10px] font-mono text-canvas/40 truncate">
											{project.slug}.knapgemaakt.nl
										</div>
									</div>
								</div>
								<!-- Screenshot -->
								<div class="aspect-[16/10] relative overflow-hidden">
									<img
										src={project.image}
										alt={`${project.title} website desktop weergave`}
										width={1200}
										height={750}
										loading="eager"
										fetchpriority="high"
										decoding="async"
										class="absolute inset-0 w-full h-full object-cover object-top"
									/>
								</div>
							</div>
						</div>

						<!-- Mobile Mockup (hidden on mobile, shown sm+) -->
						{project.mobileImage && (
							<div class="hidden sm:block relative w-[100px] md:w-[120px] -mb-4 z-10 shrink-0">
								<div class="bg-ink rounded-[1rem] p-1.5 shadow-2xl">
									<div class="relative rounded-[0.75rem] overflow-hidden">
										<!-- Notch -->
										<div class="absolute top-0 left-1/2 -translate-x-1/2 w-10 h-3 bg-ink rounded-b-lg z-10"></div>
										<!-- Screenshot -->
										<div class="aspect-[9/19] relative overflow-hidden bg-canvas/5">
											<img
												src={project.mobileImage}
												alt={`${project.title} website mobiele weergave`}
												width={375}
												height={812}
												loading="eager"
												decoding="async"
												class="absolute inset-0 w-full h-full object-cover object-top"
											/>
										</div>
									</div>
								</div>
							</div>
						)}
					</div>
				</div>
			</div>
		</section>

		<!-- Project Details -->
		<section class="py-16 md:py-24 px-6 md:px-12 lg:px-16 bg-canvas bg-grid-light relative overflow-hidden">
			<div class="max-w-6xl xl:max-w-7xl mx-auto relative z-10">
				<div class="grid md:grid-cols-3 gap-12 md:gap-16">
					<!-- Main Content -->
					<div class="md:col-span-2 space-y-12">
						<!-- About -->
						<div>
							<h2 class="text-2xl md:text-3xl font-black uppercase tracking-tight mb-6">
								Over Dit Project
							</h2>
							<p class="text-lg text-ink/70 leading-relaxed whitespace-pre-line">
								{project.fullDescription}
							</p>
						</div>

						<!-- Challenge -->
						<div>
							<h2 class="text-2xl md:text-3xl font-black uppercase tracking-tight mb-6">
								De Uitdaging
							</h2>
							<p class="text-lg text-ink/70 leading-relaxed whitespace-pre-line">
								{project.challenge}
							</p>
						</div>

						<!-- Solution -->
						<div>
							<h2 class="text-2xl md:text-3xl font-black uppercase tracking-tight mb-6">
								Onze Aanpak
							</h2>
							<p class="text-lg text-ink/70 leading-relaxed whitespace-pre-line">
								{project.solution}
							</p>
						</div>
					</div>

					<!-- Sidebar -->
					<div class="space-y-8">
						<!-- Features -->
						<div class="bg-ink text-canvas p-6 md:p-8">
							<h3 class="text-lg font-bold uppercase tracking-tight mb-6 text-acid">
								Website Features
							</h3>
							<ul class="space-y-3">
								{project.features.map((feature) => (
									<li class="flex items-start gap-3 text-canvas/80">
										<span class="text-acid mt-1">✓</span>
										<span>{feature}</span>
									</li>
								))}
							</ul>
						</div>

						<!-- CTA -->
						<div class="bg-acid p-6 md:p-8">
							<h3 class="text-lg font-bold uppercase tracking-tight mb-4">
								Ook zo'n website?
							</h3>
							<p class="text-ink/70 mb-6">
								Wij maken jouw website in 7 dagen voor €595. Geen gedoe, geen verrassingen.
							</p>
							<a
								href="/aanvragen"
								class="w-full bg-ink text-acid py-4 font-bold uppercase tracking-tight hover:bg-canvas hover:text-ink transition-colors duration-300 inline-flex items-center justify-center gap-3 group"
							>
								<span>Start Jouw Project</span>
							</a>
						</div>

					</div>
				</div>
			</div>
		</section>

		<!-- Back to Portfolio -->
		<section class="py-12 px-6 md:px-12 lg:px-16 bg-ink text-canvas bg-grid-dark">
			<div class="max-w-6xl xl:max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-6">
				<div>
					<p class="text-canvas/60 font-mono text-sm uppercase tracking-wider mb-2">
						Meer projecten bekijken?
					</p>
					<p class="text-xl font-bold">
						Ontdek ons volledige portfolio
					</p>
				</div>
				<a
					href="/portfolio"
					class="w-full sm:w-auto bg-acid text-ink px-8 py-5 font-bold uppercase tracking-tight hover:bg-canvas hover:text-ink transition-colors duration-300 inline-flex items-center justify-center gap-3 group"
				>
					<span>Naar Portfolio</span>
					<span class="transition-transform duration-300 group-hover:translate-x-1">&rarr;</span>
				</a>
			</div>
		</section>

		<Footer />
	</main>
</Layout>
