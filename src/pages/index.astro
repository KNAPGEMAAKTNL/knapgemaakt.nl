---
export const prerender = true;

import Layout from "../layouts/Layout.astro";
import Footer from "../components/Footer.astro";
import LocalBusinessSchema from "../components/seo/LocalBusinessSchema.astro";
import { TypingRotator } from "../components/TypingRotator";
import { getAllProjects } from "../data/projects";

const projects = getAllProjects();
---

<Layout
	title="Website Laten Maken | Maatwerk voor Ondernemers | KNAP GEMAAKT."
	description="Maatwerk websites die scoren, overtuigen en tijd besparen. Voor groeiende ondernemers die een website willen die écht voor ze werkt. Vraag vandaag je gratis voorstel aan."
>
	<LocalBusinessSchema />
	<main class="bg-canvas">
		<!-- HERO SECTION -->
		<section class="min-h-screen flex flex-col justify-center relative overflow-hidden px-6 md:px-12 lg:px-16 py-24 bg-grid-light">
			<!-- Subtle moving gradient overlays (desktop only - expensive on mobile) -->
			<div class="hidden md:block absolute inset-0 bg-[radial-gradient(ellipse_at_top_right,rgba(204,255,0,0.04),transparent_50%)] animate-[drift_20s_ease-in-out_infinite] pointer-events-none"></div>
			<div class="hidden md:block absolute inset-0 bg-[radial-gradient(ellipse_at_bottom_left,rgba(124,58,237,0.03),transparent_50%)] animate-[drift_25s_ease-in-out_infinite_reverse] pointer-events-none"></div>

			<!-- Accent gradient blob (desktop only - blur-[120px] is expensive on mobile) -->
			<div class="hidden md:block absolute top-1/4 -right-1/4 w-[600px] h-[600px] bg-acid/5 rounded-full blur-[120px] pointer-events-none"></div>

			<div class="max-w-6xl xl:max-w-7xl mx-auto w-full relative z-10">
				<!-- H1 Headline with typing effect -->
				<h1 class="mb-6 md:mb-8">
					<span class="text-4xl sm:text-5xl md:text-7xl lg:text-8xl xl:text-9xl font-black uppercase tracking-tight leading-[0.9] block">
						Een website die
					</span>
					<span class="block h-2 md:h-4"></span>
					<span class="text-4xl sm:text-5xl md:text-7xl lg:text-8xl xl:text-9xl font-black uppercase tracking-tight leading-[0.9] block relative">
						{/* Server-rendered placeholder for SEO & CLS prevention */}
						<span id="typing-placeholder" class="inline-block">klanten boekt.</span>
						<span class="absolute left-0 top-0">
							<TypingRotator
								client:load
								prefix=""
								words={["klanten boekt.", "leads vangt.", "nooit slaapt.", "voor je werkt."]}
								typingSpeed={80}
								deletingSpeed={40}
								pauseDuration={2500}
							/>
						</span>
					</span>
				</h1>

				<!-- Subheadline - static -->
				<p class="text-lg md:text-xl lg:text-2xl text-ink/70 max-w-2xl mb-10 md:mb-12 leading-relaxed">
					Een slimme website die reviews verzamelt, afspraken boekt en leads opvolgt. Terwijl jij onderneemt.
				</p>

				<!-- CTA -->
				<a
					href="/aanvragen"
					class="w-full sm:w-auto bg-acid text-ink px-8 py-5 font-bold uppercase tracking-tight hover:bg-ink hover:text-acid transition-colors duration-300 inline-flex items-center justify-center gap-3 group mb-12 md:mb-16"
				>
				Laten we kennismaken
					<span class="transition-transform duration-300 group-hover:translate-x-1">&rarr;</span>
				</a>

				<!-- Features -->
				<div class="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6 pt-8 border-t border-ink/10">
					<div class="flex items-center gap-2 text-sm md:text-base text-ink/70">
						<span class="w-2 h-2 bg-acid rounded-full shrink-0"></span>
						<span>Kant-en-klaar opgeleverd</span>
					</div>
					<div class="flex items-center gap-2 text-sm md:text-base text-ink/70">
						<span class="w-2 h-2 bg-acid rounded-full shrink-0"></span>
						<span>Volgende week online</span>
					</div>
					<div class="flex items-center gap-2 text-sm md:text-base text-ink/70">
						<span class="w-2 h-2 bg-acid rounded-full shrink-0"></span>
						<span>Geen uurtje-factuurtje</span>
					</div>
					<div class="flex items-center gap-2 text-sm md:text-base text-ink/70">
						<span class="w-2 h-2 bg-acid rounded-full shrink-0"></span>
						<span>Werkt 24/7, ook in het weekend</span>
					</div>
				</div>
			</div>
		</section>

		<!-- INTRO / ABOUT SECTION -->
		<section class="py-16 md:py-24 px-6 md:px-12 lg:px-16 bg-ink text-canvas bg-grid-dark relative overflow-hidden">
			<div class="max-w-6xl xl:max-w-7xl mx-auto">
				<div class="grid md:grid-cols-[2fr_3fr] gap-12 md:gap-16 items-center">
					<!-- Profile Photo -->
					<div class="order-2 md:order-1">
						<img
							src="/assets/yannick.webp"
							alt="Yannick"
							class="w-full max-w-xs md:max-w-none aspect-[4/5] object-cover object-top mx-auto"
							loading="lazy"
						/>
					</div>
					<!-- Text -->
					<div class="order-1 md:order-2">
						<div class="text-xs font-mono uppercase tracking-[0.2em] text-acid mb-4">
							[ Even Voorstellen ]
						</div>
						<h2 class="text-3xl md:text-4xl font-black uppercase tracking-tight leading-[0.95] mb-6">
							Ik Ben Yannick.
						</h2>
						<div class="space-y-4 text-canvas/80 text-lg leading-relaxed">
							<p>
								Vanuit Buren help ik ondernemers met websites die écht iets opleveren. Niet alleen mooi, maar ook slim: leads opvangen, afspraken boeken, klanten opvolgen.
							</p>
							<p>
								Ik geloof dat een kleine ondernemer dezelfde tools verdient als een groot bedrijf. Daarom bouw ik websites die voor je werken, ook als jij er niet bent. Geen gedoe met plugins, updates of technische problemen. Gewoon een site die doet wat hij moet doen.
							</p>
						</div>
						<a href="/over-mij" class="inline-flex items-center gap-2 text-acid font-mono text-sm uppercase tracking-wider hover:text-canvas transition-colors group mt-6">
							<span>Meer over mij</span>
							<span class="transition-transform duration-300 group-hover:translate-x-1">&rarr;</span>
						</a>
					</div>
				</div>
			</div>
		</section>

		<!-- SERVICES SECTION -->
		<section id="diensten" class="py-16 md:py-24 px-6 md:px-12 lg:px-16 bg-canvas bg-grid-light relative overflow-hidden">
			<div class="max-w-6xl xl:max-w-7xl mx-auto">
				<div class="text-xs font-mono uppercase tracking-[0.2em] text-ink/60 mb-6">
					[ Wat Ik Voor Je Kan Doen ]
				</div>
				<h2 class="text-3xl md:text-5xl font-black uppercase tracking-tight leading-[0.95] mb-12 md:mb-16 max-w-3xl">
					Websites Die Werken. Systemen Die Tijd Besparen.
				</h2>

				<div class="grid md:grid-cols-2 gap-8 md:gap-12">
					<!-- Website -->
					<a href="/website-laten-maken" class="group block">
						<div class="bg-ink p-8 md:p-10 group-hover:bg-ink/90 transition-colors">
							<div class="flex items-center justify-between mb-8">
								<span class="text-acid font-mono text-sm uppercase tracking-wider">Websites</span>
								<span class="text-canvas/40 group-hover:text-acid transition-colors">&rarr;</span>
							</div>
							<h3 class="text-2xl md:text-3xl font-black uppercase tracking-tight text-canvas mb-4">
								Website Laten Maken
							</h3>
							<p class="text-canvas/70 leading-relaxed mb-6">
								Een professionele website die klanten aantrekt en vertrouwen wekt. Van €495 voor een maatwerk site tot €995 met slimme automations erbij.
							</p>
							<div class="flex items-center gap-4 text-canvas/50 text-sm">
								<span>Vanaf €495</span>
								<span class="text-canvas/30">•</span>
								<span>Klaar in 7 dagen</span>
							</div>
						</div>
					</a>

					<!-- Automations -->
					<a href="/automations" class="group block">
						<div class="bg-ink p-8 md:p-10 group-hover:bg-ink/90 transition-colors">
							<div class="flex items-center justify-between mb-8">
								<span class="text-acid font-mono text-sm uppercase tracking-wider">Automations</span>
								<span class="text-canvas/40 group-hover:text-acid transition-colors">&rarr;</span>
							</div>
							<h3 class="text-2xl md:text-3xl font-black uppercase tracking-tight text-canvas mb-4">
								Al Een Website?
							</h3>
							<p class="text-canvas/70 leading-relaxed mb-6">
								Voeg slimme systemen toe aan je bestaande site. Automatisch afspraken boeken, reviews verzamelen, leads opvolgen. Zonder nieuwe website.
							</p>
							<div class="flex items-center gap-4 text-canvas/50 text-sm">
								<span>Op maat</span>
								<span class="text-canvas/30">•</span>
								<span>Koppelt met je huidige site</span>
							</div>
						</div>
					</a>
				</div>
			</div>
		</section>

		<!-- PORTFOLIO PREVIEW -->
		<section class="py-16 md:py-24 px-6 md:px-12 lg:px-16 bg-ink text-canvas bg-grid-dark relative overflow-hidden">
			<div class="max-w-6xl xl:max-w-7xl mx-auto">
				<div class="grid md:grid-cols-2 gap-12 md:gap-16 items-center">
					<!-- Stacked Images -->
					<div class="relative">
						<div class="relative z-10">
							<img
								src={projects[0]?.overviewMockup || projects[0]?.image}
								alt={projects[0]?.title}
								class="w-full aspect-[16/10] object-cover shadow-2xl"
								loading="lazy"
							/>
						</div>
						<div class="absolute -bottom-6 -right-6 md:-bottom-8 md:-right-8 w-2/3 z-20">
							<img
								src={projects[1]?.overviewMockup || projects[1]?.image}
								alt={projects[1]?.title}
								class="w-full aspect-[16/10] object-cover shadow-2xl border-4 border-ink"
								loading="lazy"
							/>
						</div>
					</div>

					<!-- Text -->
					<div class="md:pl-8">
						<div class="text-xs font-mono uppercase tracking-[0.2em] text-acid mb-4">
							[ Recent Werk ]
						</div>
						<h2 class="text-3xl md:text-4xl font-black uppercase tracking-tight leading-[0.95] mb-6">
							Bekijk Mijn Projecten
						</h2>
						<p class="text-canvas/70 text-lg leading-relaxed mb-8">
							Van sportscholen tot luxe interieurzaken. Elk project is maatwerk, gebouwd om resultaat te leveren.
						</p>
						<a
							href="/portfolio"
							class="inline-flex items-center gap-3 text-acid font-mono text-sm uppercase tracking-wider hover:text-canvas transition-colors group"
						>
							<span>Bekijk alle projecten</span>
							<span class="transition-transform duration-300 group-hover:translate-x-1">&rarr;</span>
						</a>
					</div>
				</div>
			</div>
		</section>

		<!-- LEAD MAGNET: FREE WEBSITE AUDIT -->
		<section class="py-16 md:py-24 px-6 md:px-12 lg:px-16 bg-canvas border-y-2 border-ink/10 relative overflow-hidden">
			<div class="max-w-4xl mx-auto">
				<div class="text-center mb-12">
					<div class="text-xs font-mono uppercase tracking-[0.2em] text-ink/60 mb-4">
						[ Gratis Website Check ]
					</div>
					<h2 class="text-3xl md:text-4xl font-black uppercase tracking-tight leading-[0.95] mb-4">
						Benieuwd Hoe Je Website Scoort?
					</h2>
					<p class="text-ink/60 text-lg max-w-2xl mx-auto">
						Ik bekijk je website en geef eerlijke feedback over snelheid, vindbaarheid en verbeterpunten. Binnen 24 uur in je inbox.
					</p>
				</div>

				<form id="audit-form" class="max-w-xl mx-auto">
					<div class="flex flex-col sm:flex-row gap-3 mb-3">
						<input
							type="text"
							id="audit-name"
							name="name"
							required
							class="flex-1 px-4 py-4 bg-canvas border-2 border-ink/10 text-ink placeholder-ink/40 focus:border-ink focus:outline-none transition-colors"
							placeholder="Je naam"
						/>
						<input
							type="email"
							id="audit-email"
							name="email"
							required
							class="flex-1 px-4 py-4 bg-canvas border-2 border-ink/10 text-ink placeholder-ink/40 focus:border-ink focus:outline-none transition-colors"
							placeholder="E-mailadres"
						/>
					</div>
					<div class="flex flex-col sm:flex-row gap-3 mb-3">
						<input
							type="text"
							id="audit-website"
							name="website"
							required
							class="flex-1 px-4 py-4 bg-canvas border-2 border-ink/10 text-ink placeholder-ink/40 focus:border-ink focus:outline-none transition-colors"
							placeholder="jouwwebsite.nl"
						/>
						<button
							type="submit"
							class="bg-ink text-canvas px-8 py-4 font-bold uppercase tracking-tight hover:bg-acid hover:text-ink transition-colors duration-300 whitespace-nowrap cursor-pointer"
						>
							Check mijn website
						</button>
					</div>

					<!-- Privacy checkbox -->
					<div class="flex items-start gap-3">
						<input
							type="checkbox"
							id="audit-privacy"
							name="privacy"
							required
							oninvalid="this.setCustomValidity('Je moet akkoord gaan met de privacyverklaring')"
							oninput="this.setCustomValidity('')"
							class="mt-1 w-4 h-4 shrink-0 accent-electric"
						/>
						<label for="audit-privacy" class="text-sm text-ink/60">
							Ik ga akkoord met de <a href="/privacy" class="underline hover:text-ink transition-colors">privacyverklaring</a>
						</label>
					</div>
				</form>
			</div>
		</section>

		<!-- FAQ SECTION -->
		<section id="faq" class="py-16 md:py-24 px-6 md:px-12 lg:px-16 bg-ink text-canvas bg-grid-dark relative overflow-hidden">
			<div class="max-w-6xl xl:max-w-7xl mx-auto">
				<div class="text-xs font-mono uppercase tracking-[0.2em] text-acid mb-6">
					[ Veelgestelde Vragen ]
				</div>
				<h2 class="text-3xl md:text-5xl font-black uppercase tracking-tight leading-[0.95] mb-12 md:mb-16">
					Vragen Die Ik Vaak Krijg
				</h2>

				<div class="grid md:grid-cols-2 gap-8 md:gap-12">
					<div class="space-y-8">
						<div class="space-y-3">
							<h3 class="text-lg font-bold text-acid">Hoe werkt het proces?</h3>
							<p class="text-canvas/70 leading-relaxed">
								We beginnen met een kort gesprek over je bedrijf en wat je wilt bereiken. Daarna ga ik aan de slag. Binnen 7 dagen heb je het eerste ontwerp. Je geeft feedback, ik pas aan, en dan gaat je site live.
							</p>
						</div>

						<div class="space-y-3">
							<h3 class="text-lg font-bold text-acid">Wat als ik niet tevreden ben?</h3>
							<p class="text-canvas/70 leading-relaxed">
								Dan krijg je je geld terug. Ik heb een 100% tevredenheidsgarantie. Mijn doel is dat je blij bent met het resultaat, niet dat je ergens aan vastzit.
							</p>
						</div>

						<div class="space-y-3">
							<h3 class="text-lg font-bold text-acid">Moet ik zelf teksten aanleveren?</h3>
							<p class="text-canvas/70 leading-relaxed">
								Dat hoeft niet. Ik schrijf de teksten voor je, gebaseerd op een gesprek over je bedrijf en doelgroep. Jij checkt of het klopt. Heb je liever eigen teksten? Ook goed, jij beslist.
							</p>
						</div>
					</div>

					<div class="space-y-8">
						<div class="space-y-3">
							<h3 class="text-lg font-bold text-acid">Wat is het verschil tussen een website en automations?</h3>
							<p class="text-canvas/70 leading-relaxed">
								Een website is je online visitekaartje. Automations zijn slimme systemen die taken uit handen nemen: afspraken inplannen, reviews verzamelen, leads opvolgen. Je kunt starten met een website en later uitbreiden.
							</p>
						</div>

						<div class="space-y-3">
							<h3 class="text-lg font-bold text-acid">Hoelang duurt het voordat mijn website live staat?</h3>
							<p class="text-canvas/70 leading-relaxed">
								Gemiddeld 7 werkdagen vanaf ons eerste gesprek. Soms sneller als alles duidelijk is, soms iets langer als er veel feedback-rondes nodig zijn.
							</p>
						</div>

						<div class="space-y-3">
							<h3 class="text-lg font-bold text-acid">Kan ik mijn website later zelf aanpassen?</h3>
							<p class="text-canvas/70 leading-relaxed">
								Ja, als je dat wilt. Ik bouw websites die je zelf kunt beheren, maar de meeste klanten vinden het fijn om aanpassingen aan mij door te geven. Kleine wijzigingen regel ik vaak dezelfde dag.
							</p>
						</div>
					</div>
				</div>
			</div>
		</section>

		<Footer />
	</main>
</Layout>

<script>
	// Normalize URL - add https:// if missing
	function normalizeUrl(url: string): string {
		if (!url || !url.trim()) return '';
		url = url.trim();
		if (!/^https?:\/\//i.test(url)) {
			url = 'https://' + url;
		}
		return url;
	}

	// Audit form submission handler
	function attachAuditFormHandler() {
		const form = document.getElementById('audit-form');
		if (!form || form.dataset.listenerAttached) return;

		form.addEventListener('submit', async (e) => {
			e.preventDefault();

			const formData = new FormData(form as HTMLFormElement);
			const submitBtn = form.querySelector('button[type="submit"]') as HTMLButtonElement;
			const originalText = submitBtn.textContent;

			// Normalize the website URL
			const rawUrl = formData.get('website') as string;
			const websiteUrl = normalizeUrl(rawUrl);

			// Show loading state
			submitBtn.disabled = true;
			submitBtn.textContent = 'Versturen...';

			try {
				const response = await fetch('/api/submissions', {
					method: 'POST',
					headers: { 'Content-Type': 'application/json' },
					body: JSON.stringify({
						type: 'audit',
						specification: 'Gratis website-audit',
						name: formData.get('name'),
						email: formData.get('email'),
						website_url: websiteUrl,
					}),
				});

				if (response.ok) {
					// Show success message
					form.innerHTML = `
						<div class="text-center py-8">
							<div class="text-acid text-4xl mb-4">✓</div>
							<h3 class="text-xl font-bold text-ink mb-2">Aanvraag ontvangen!</h3>
							<p class="text-ink/70">Ik stuur je binnen 24 uur een persoonlijke video-analyse.</p>
						</div>
					`;
				} else {
					throw new Error('Submission failed');
				}
			} catch (error) {
				submitBtn.disabled = false;
				submitBtn.textContent = originalText;
				alert('Er ging iets mis. Probeer het opnieuw of stuur een mail naar info@knapgemaakt.nl');
			}
		});

		form.dataset.listenerAttached = 'true';
	}

	// Attach on initial load
	attachAuditFormHandler();

	// Re-attach after View Transitions
	document.addEventListener('astro:after-swap', attachAuditFormHandler);
</script>
